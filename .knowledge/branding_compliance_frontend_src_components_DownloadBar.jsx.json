{"is_source_file": true, "format": "JavaScript (JSX)", "description": "This file defines a React component named DownloadBar that provides UI controls for finalizing a job with e-signature placeholders and downloading a resulting zip file. It includes logic for role-based access, validation, error handling, and communication with backend APIs.", "external_files": ["../api/client", "../utils/errorHandling"], "external_methods": ["getJson", "postJson", "formatApiError", "normalizeApiError"], "published": ["DownloadBar"], "classes": [], "methods": [{"name": "saveBlob", "description": "Helper function to save binary data as a file in the browser."}, {"name": "finalizeJob()", "description": "Initiates the finalize request to the backend, posting e-signature placeholders.", "scope": "DownloadBar", "scopeKind": "function"}, {"name": "downloadZip()", "description": "Handles the process of downloading the finalized zip file from the server.", "scope": "DownloadBar", "scopeKind": "function"}, {"name": "DownloadBar({ jobId, status, user, onFinalized, onError })", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["postJson", "fetch", "saveBlob"], "search-terms": ["DownloadBar", "finalize", "download", "e-sign placeholders", "role-based access", "zip download", "React component", "file download", "error handling", "API calls"], "state": 2, "file_id": 27, "knowledge_revision": 69, "git_revision": "", "ctags": [{"_type": "tag", "name": "DownloadBar", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^export default function DownloadBar({ jobId, status, user, onFinalized, onError }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ jobId, status, user, onFinalized, onError })"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"NotFinalized\", message: \"Please finalize with e-sign placeholder befo/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"ValidationError\", message: \"Reason is required (min 3 chars).\", code:/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "downloadZip", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^  async function downloadZip() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "DownloadBar", "scopeKind": "function"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^        const err = { name: \"HttpError\", message: text || `Download failed (HTTP ${res.status})`/", "language": "JavaScript", "kind": "class", "scope": "DownloadBar.downloadZip", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"Forbidden\", message: \"You do not have permission to download.\", statu/", "language": "JavaScript", "kind": "class", "scope": "DownloadBar.downloadZip", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"Forbidden\", message: \"You do not have permission to finalize.\", statu/", "language": "JavaScript", "kind": "class", "scope": "DownloadBar.finalizeJob", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "language": "JavaScript", "kind": "class", "scope": "DownloadBar.downloadZip", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "language": "JavaScript", "kind": "class", "scope": "DownloadBar.finalizeJob", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"NotFinalized\", message: \"Please finalize with e-sign placeholder befo/", "language": "JavaScript", "kind": "class", "scope": "DownloadBar.downloadZip", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"ValidationError\", message: \"Reason is required (min 3 chars).\", code:/", "language": "JavaScript", "kind": "class", "scope": "DownloadBar.finalizeJob", "scopeKind": "class"}, {"_type": "tag", "name": "finalizeJob", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^  async function finalizeJob() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "DownloadBar", "scopeKind": "function"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^        const err = { name: \"HttpError\", message: text || `Download failed (HTTP ${res.status})`/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"Forbidden\", message: \"You do not have permission to download.\", statu/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"Forbidden\", message: \"You do not have permission to finalize.\", statu/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"NotFinalized\", message: \"Please finalize with e-sign placeholder befo/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"ValidationError\", message: \"Reason is required (min 3 chars).\", code:/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^        const err = { name: \"HttpError\", message: text || `Download failed (HTTP ${res.status})`/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"Forbidden\", message: \"You do not have permission to download.\", statu/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"Forbidden\", message: \"You do not have permission to finalize.\", statu/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"NotFinalized\", message: \"Please finalize with e-sign placeholder befo/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"ValidationError\", message: \"Reason is required (min 3 chars).\", code:/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "reason", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^          value={reason}$/", "language": "JavaScript", "kind": "field", "scope": "DownloadBar.value", "scopeKind": "class"}, {"_type": "tag", "name": "signature", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^          value={signature}$/", "language": "JavaScript", "kind": "field", "scope": "DownloadBar.value", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^        const err = { name: \"HttpError\", message: text || `Download failed (HTTP ${res.status})`/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"Forbidden\", message: \"You do not have permission to download.\", statu/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^      const err = { name: \"Forbidden\", message: \"You do not have permission to finalize.\", statu/", "language": "JavaScript", "kind": "property", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/components/DownloadBar.jsx", "pattern": "/^        userId,$/", "language": "JavaScript", "kind": "field", "scope": "DownloadBar.finalizeJob.payload", "scopeKind": "class"}], "hash": "12b37cb4020595112be837589be82c67", "format-version": 4, "code-base-name": "branding_compliance_frontend", "filename": "branding_compliance_frontend/src/components/DownloadBar.jsx", "fields": [{"name": "const err = { name: \"InvalidState\", message: \"Job is not completed.\", code: \"NOT_COMPLETED/", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class", "description": "unavailable"}, {"name": "const err = { name: \"NotFinalized\", message: \"Please finalize with e-sign placeholder befo/", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class", "description": "unavailable"}, {"name": "const err = { name: \"ValidationError\", message: \"Reason is required (min 3 chars).\", code:/", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class", "description": "unavailable"}, {"name": "const err = { name: \"HttpError\", message: text || `Download failed (HTTP ${res.status})`/", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class", "description": "unavailable"}, {"name": "const err = { name: \"Forbidden\", message: \"You do not have permission to download.\", statu/", "scope": "DownloadBar.downloadZip.err", "scopeKind": "class", "description": "unavailable"}, {"name": "const err = { name: \"Forbidden\", message: \"You do not have permission to finalize.\", statu/", "scope": "DownloadBar.finalizeJob.err", "scopeKind": "class", "description": "unavailable"}, {"name": "value={reason}", "scope": "DownloadBar.value", "scopeKind": "class", "description": "unavailable"}, {"name": "value={signature}", "scope": "DownloadBar.value", "scopeKind": "class", "description": "unavailable"}, {"name": "userId,", "scope": "DownloadBar.finalizeJob.payload", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"69": ""}]}