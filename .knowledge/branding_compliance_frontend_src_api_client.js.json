{"is_source_file": true, "format": "JavaScript", "description": "This file provides a robust client implementation for interacting with an API in a frontend environment. It includes functions for generating UUIDs, retrieving authorization contexts, normalizing errors, handling HTTP requests with retries, and specialized methods for common HTTP verbs such as GET, POST, PUT, PATCH, and DELETE. It is designed to ensure reliable, authenticated, and traceable API communication with features like exponential backoff retries, header management, and error normalization.", "external_files": ["./contracts"], "external_methods": ["getApiBaseUrl"], "published": ["uuidv4", "getAuthContext", "apiFetch", "getJson", "postJson", "putJson", "patchJson", "del", "postMultipart"], "classes": [], "methods": [{"name": "uuidv4()", "description": "Generates a RFC 4122 UUID v4 using the Web Crypto API when available; falls back to a polyfill otherwise.", "scope": "", "scopeKind": ""}, {"name": "getAuthContext()", "description": "Retrieves and parses authentication token and user ID from localStorage, used for request attribution.", "scope": "", "scopeKind": ""}, {"name": "normalizeError(err, fallbackMessage = \"Unexpected error occurred\")", "description": "Converts various error shapes into a standardized ApiError object with a message, name, and optional details.", "scope": "", "scopeKind": ""}, {"name": "isRetryable(reason)", "description": "Determines if an error or response indicates a retry should be attempted, based on status codes or error types.", "scope": "", "scopeKind": ""}, {"name": "delay(ms)", "description": "Returns a Promise that resolves after a specified number of milliseconds; used for backoff delays.", "scope": "", "scopeKind": ""}, {"name": "apiFetch(path, options = {})", "description": "Core fetch wrapper that adds required headers, handles JSON/multipart data, retries on transient errors, and normalizes errors. Supports custom methods, headers, query params, and request body.", "scope": "", "scopeKind": ""}, {"name": "getJson(path, options)", "description": "Performs a GET request expecting a JSON response, simplifying usage and error handling.", "scope": "", "scopeKind": ""}, {"name": "postJson(path, body, options)", "description": "Performs a POST request with JSON body and returns parsed JSON response.", "scope": "", "scopeKind": ""}, {"name": "putJson(path, body, options)", "description": "Performs a PUT request with JSON body and returns parsed JSON response.", "scope": "", "scopeKind": ""}, {"name": "patchJson(path, body, options)", "description": "Performs a PATCH request with JSON body and returns parsed JSON response.", "scope": "", "scopeKind": ""}, {"name": "del(path, options)", "description": "Executes a DELETE request, optionally with query params, returning parsed response or null.", "scope": "", "scopeKind": ""}, {"name": "postMultipart(path, formData, options)", "description": "Sends a multipart/form-data payload, typically for uploads, with proper headers and correlation.", "scope": "", "scopeKind": ""}], "calls": ["getApiBaseUrl", "fetch", "crypto.randomUUID", "localStorage.getItem", "JSON.parse", "JSON.stringify"], "search-terms": ["API client", "fetch with retries", "UUID generator", "header management", "error normalization", "authentication context", "multipart/form-data", "GxP compliance", "exponential backoff", "retry logic"], "state": 2, "file_id": 19, "knowledge_revision": 77, "git_revision": "e73b6faa2312e5d4ebc9e2951c64a29d47a0c3f8", "revision_history": [{"43": ""}, {"77": "e73b6faa2312e5d4ebc9e2951c64a29d47a0c3f8"}], "ctags": [{"_type": "tag", "name": "apiErr", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^  const apiErr = {$/", "language": "JavaScript", "kind": "class", "scope": "normalizeError", "scopeKind": "class"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function apiFetch(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "attempts", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    attempts: Math.max(0, options?.retry?.attempts ?? 2), \\/\\/ additional retries beyond first t/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.retryCfg", "scopeKind": "class"}, {"_type": "tag", "name": "baseMs", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    baseMs: Math.max(50, options?.retry?.baseMs ?? 150),$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.retryCfg", "scopeKind": "class"}, {"_type": "tag", "name": "blob", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          data = { blob };$/", "language": "JavaScript", "kind": "field", "scope": "apiFetch.data", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          code: data?.code,$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "del", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function del(path, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options)"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^function delay(ms) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms)"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          details: data,$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "errObj", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^        const errObj = {$/", "language": "JavaScript", "kind": "class", "scope": "apiFetch", "scopeKind": "class"}, {"_type": "tag", "name": "getAuthContext", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export function getAuthContext() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getJson", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function getJson(path, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options)"}, {"_type": "tag", "name": "isRetryable", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^function isRetryable(reason) {$/", "language": "JavaScript", "kind": "function", "signature": "(reason)"}, {"_type": "tag", "name": "maxMs", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    maxMs: Math.max(250, options?.retry?.maxMs ?? 1500),$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.retryCfg", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          message: (data && (data.message || data.detail)) || `Request failed with status ${res./", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    message: fallbackMessage,$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.apiErr", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          name: \"HttpError\",$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    name: \"UnknownError\",$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.apiErr", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeError", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^function normalizeError(err, fallbackMessage = \"Unexpected error occurred\") {$/", "language": "JavaScript", "kind": "function", "signature": "(err, fallbackMessage = \"Unexpected error occurred\")"}, {"_type": "tag", "name": "patchJson", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function patchJson(path, body, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body, options)"}, {"_type": "tag", "name": "postJson", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function postJson(path, body, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body, options)"}, {"_type": "tag", "name": "postMultipart", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function postMultipart(path, formData, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, formData, options)"}, {"_type": "tag", "name": "putJson", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function putJson(path, body, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body, options)"}, {"_type": "tag", "name": "requestId", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          requestId: res.headers.get(\"X-Request-ID\") || reqId,$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "retryCfg", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^  const retryCfg = {$/", "language": "JavaScript", "kind": "class", "scope": "apiFetch", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          status: res.status,$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "uuidv4", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export function uuidv4() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "de63750dd0ee8a049dbd02460df45802", "format-version": 4, "code-base-name": "branding_compliance_frontend", "filename": "branding_compliance_frontend/src/api/client.js", "fields": [{"name": "attempts: Math.max(0, options?.retry?.attempts ?? 2), \\/\\/ additional retries beyond first t/", "scope": "apiFetch.retryCfg", "scopeKind": "class", "description": "unavailable"}, {"name": "baseMs: Math.max(50, options?.retry?.baseMs ?? 150),", "scope": "apiFetch.retryCfg", "scopeKind": "class", "description": "unavailable"}, {"name": "data = { blob };", "scope": "apiFetch.data", "scopeKind": "class", "description": "unavailable"}, {"name": "code: data?.code,", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "details: data,", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "maxMs: Math.max(250, options?.retry?.maxMs ?? 1500),", "scope": "apiFetch.retryCfg", "scopeKind": "class", "description": "unavailable"}, {"name": "message: (data && (data.message || data.detail)) || `Request failed with status ${res./", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "message: fallbackMessage,", "scope": "normalizeError.apiErr", "scopeKind": "class", "description": "unavailable"}, {"name": "name: \"HttpError\",", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "name: \"UnknownError\",", "scope": "normalizeError.apiErr", "scopeKind": "class", "description": "unavailable"}, {"name": "requestId: res.headers.get(\"X-Request-ID\") || reqId,", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "status: res.status,", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}]}