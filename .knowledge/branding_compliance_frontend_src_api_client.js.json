{"is_source_file": true, "format": "JavaScript", "description": "This file implements an API client module for a frontend application. It provides functions to generate UUIDs, read authentication context, normalize errors, determine retryability, and perform network requests with built-in retry logic, header management, and response parsing. The module offers convenient wrapper functions for common HTTP methods such as GET, POST, PUT, PATCH, DELETE, and multipart form uploads, all designed to handle GxP compliance, error normalization, and robust network communication.", "external_files": ["./contracts"], "external_methods": ["getApiBaseUrl"], "published": ["uuidv4", "getAuthContext", "apiFetch", "getJson", "postJson", "putJson", "patchJson", "del", "postMultipart"], "classes": [], "methods": [{"name": "uuidv4()", "description": "Generates a RFC 4122 UUID v4 using the Web Crypto API if available, otherwise falls back to a polyfill.", "scope": "", "scopeKind": ""}, {"name": "getAuthContext()", "description": "Reads the authentication token and user ID from localStorage, returning an object with optional 'token' and 'userId' properties.", "scope": "", "scopeKind": ""}, {"name": "normalizeError(err, fallbackMessage = \"Unexpected error occurred\")", "description": "Converts various error shapes into a standardized ApiError object, adding relevant error details.", "scope": "", "scopeKind": ""}, {"name": "isRetryable(reason)", "description": "Determines whether an error or response status indicates that the request should be retried.", "scope": "", "scopeKind": ""}, {"name": "delay(ms)", "description": "Returns a Promise that resolves after a specified number of milliseconds; used for exponential backoff retries.", "scope": "", "scopeKind": ""}, {"name": "apiFetch(path, options = {})", "description": "Core function that performs fetch requests with automatic retry, header management (including ID and auth headers), JSON/multipart handling, and error normalization.", "scope": "", "scopeKind": ""}, {"name": "getJson(path, options)", "description": "Convenience function that performs a GET request expecting a JSON response.", "scope": "", "scopeKind": ""}, {"name": "postJson(path, body, options)", "description": "Performs a POST request with a JSON body and parses the JSON response.", "scope": "", "scopeKind": ""}, {"name": "putJson(path, body, options)", "description": "Performs a PUT request with a JSON body and parses the JSON response.", "scope": "", "scopeKind": ""}, {"name": "patchJson(path, body, options)", "description": "Performs a PATCH request with a JSON body and parses the JSON response.", "scope": "", "scopeKind": ""}, {"name": "del(path, options)", "description": "Performs a DELETE request, optionally with query parameters, returning parsed JSON or null.", "scope": "", "scopeKind": ""}, {"name": "postMultipart(path, formData, options)", "description": "Performs a POST request with multipart/form-data payload, used for uploads.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "JSON.parse", "JSON.stringify", "localStorage.getItem", "crypto.randomUUID", "setTimeout"], "search-terms": ["API client", "fetch with retries", "GxP compliance", "UUID generation", "Authorization header", "error normalization", "multipart upload", "exponential backoff"], "state": 2, "file_id": 19, "knowledge_revision": 43, "git_revision": "", "ctags": [{"_type": "tag", "name": "apiErr", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^  const apiErr = {$/", "language": "JavaScript", "kind": "class", "scope": "normalizeError", "scopeKind": "class"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function apiFetch(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "attempts", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    attempts: Math.max(0, options?.retry?.attempts ?? 2), \\/\\/ additional retries beyond first t/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.retryCfg", "scopeKind": "class"}, {"_type": "tag", "name": "baseMs", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    baseMs: Math.max(50, options?.retry?.baseMs ?? 150),$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.retryCfg", "scopeKind": "class"}, {"_type": "tag", "name": "blob", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          data = { blob };$/", "language": "JavaScript", "kind": "field", "scope": "apiFetch.data", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          code: data?.code,$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "del", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function del(path, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options)"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^function delay(ms) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms)"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          details: data,$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "errObj", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^        const errObj = {$/", "language": "JavaScript", "kind": "class", "scope": "apiFetch", "scopeKind": "class"}, {"_type": "tag", "name": "getAuthContext", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export function getAuthContext() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getJson", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function getJson(path, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options)"}, {"_type": "tag", "name": "isRetryable", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^function isRetryable(reason) {$/", "language": "JavaScript", "kind": "function", "signature": "(reason)"}, {"_type": "tag", "name": "maxMs", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    maxMs: Math.max(250, options?.retry?.maxMs ?? 1500),$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.retryCfg", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          message: (data && (data.message || data.detail)) || `Request failed with status ${res./", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    message: fallbackMessage,$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.apiErr", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          name: \"HttpError\",$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^    name: \"UnknownError\",$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.apiErr", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeError", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^function normalizeError(err, fallbackMessage = \"Unexpected error occurred\") {$/", "language": "JavaScript", "kind": "function", "signature": "(err, fallbackMessage = \"Unexpected error occurred\")"}, {"_type": "tag", "name": "patchJson", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function patchJson(path, body, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body, options)"}, {"_type": "tag", "name": "postJson", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function postJson(path, body, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body, options)"}, {"_type": "tag", "name": "postMultipart", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function postMultipart(path, formData, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, formData, options)"}, {"_type": "tag", "name": "putJson", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export async function putJson(path, body, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body, options)"}, {"_type": "tag", "name": "requestId", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          requestId: res.headers.get(\"X-Request-ID\") || reqId,$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "retryCfg", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^  const retryCfg = {$/", "language": "JavaScript", "kind": "class", "scope": "apiFetch", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^          status: res.status,$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.errObj", "scopeKind": "class"}, {"_type": "tag", "name": "uuidv4", "path": "/home/kavia/workspace/code-generation/branding-compliance-validator-214344-214346/branding_compliance_frontend/src/api/client.js", "pattern": "/^export function uuidv4() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "920e453ea760792fc0b34778fdc07292", "format-version": 4, "code-base-name": "branding_compliance_frontend", "filename": "branding_compliance_frontend/src/api/client.js", "fields": [{"name": "attempts: Math.max(0, options?.retry?.attempts ?? 2), \\/\\/ additional retries beyond first t/", "scope": "apiFetch.retryCfg", "scopeKind": "class", "description": "unavailable"}, {"name": "baseMs: Math.max(50, options?.retry?.baseMs ?? 150),", "scope": "apiFetch.retryCfg", "scopeKind": "class", "description": "unavailable"}, {"name": "data = { blob };", "scope": "apiFetch.data", "scopeKind": "class", "description": "unavailable"}, {"name": "code: data?.code,", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "details: data,", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "maxMs: Math.max(250, options?.retry?.maxMs ?? 1500),", "scope": "apiFetch.retryCfg", "scopeKind": "class", "description": "unavailable"}, {"name": "message: (data && (data.message || data.detail)) || `Request failed with status ${res./", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "message: fallbackMessage,", "scope": "normalizeError.apiErr", "scopeKind": "class", "description": "unavailable"}, {"name": "name: \"HttpError\",", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "name: \"UnknownError\",", "scope": "normalizeError.apiErr", "scopeKind": "class", "description": "unavailable"}, {"name": "requestId: res.headers.get(\"X-Request-ID\") || reqId,", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}, {"name": "status: res.status,", "scope": "apiFetch.errObj", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"43": ""}]}